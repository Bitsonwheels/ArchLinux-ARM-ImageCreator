- pipeline: build
  name: Build
  refs:
  - refs/heads/main
  priority: LOW
  fail_on_prepare_env_warning: true
  resources: NANO
  arch: ARM64
  actions:
  - action: WORKDIR /source
    type: BUILD
    docker_image_name: hoverbear/archlinux
    docker_image_tag: latest
    execute_commands:
    - FROM hoverbear/archlinux
    - "# It's always a good idea to update Arch, then install deps."
    - RUN pacman -Syu
    - RUN pacman -S git file awk gcc --noconfirm
    - ""
    - "# /source - Should mount the user code."
    - "VOLUME [ \"/source\" ]"
    - ""
    - "# Change the Workdir to /source"
    - WORKDIR /source
    setup_commands:
    - RUN pacman -Syu
    - RUN pacman -S git file awk gcc --noconfirm
    shell: BASH
